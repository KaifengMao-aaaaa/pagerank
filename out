[{'sha': 'f309b2657d3f0a7f8eeb3173b31415f2e88a4a48', 'filename': 'crates/editor/src/items.rs', 'status': 'modified', 'additions': 6, 'deletions': 3, 'changes': 9, 'blob_url': 'https://github.com/zed-industries/zed/blob/9a5394c1951b6040c82bede254553abec2c6ec07/crates%2Feditor%2Fsrc%2Fitems.rs', 'raw_url': 'https://github.com/zed-industries/zed/raw/9a5394c1951b6040c82bede254553abec2c6ec07/crates%2Feditor%2Fsrc%2Fitems.rs', 'contents_url': 'https://api.github.com/repos/zed-industries/zed/contents/crates%2Feditor%2Fsrc%2Fitems.rs?ref=9a5394c1951b6040c82bede254553abec2c6ec07', 'patch': '@@ -992,12 +992,15 @@ impl SerializableItem for Editor {\n                     };\n \n                     // First create the empty buffer\n-                    let buffer = project.update(&mut cx, |project, cx| {\n-                        project.create_local_buffer("", language, cx)\n-                    })?;\n+                    let buffer = project\n+                        .update(&mut cx, |project, cx| project.create_buffer(cx))?\n+                        .await?;\n \n                     // Then set the text so that the dirty bit is set correctly\n                     buffer.update(&mut cx, |buffer, cx| {\n+                        if let Some(language) = language {\n+                            buffer.set_language(Some(language), cx);\n+                        }\n                         buffer.set_text(contents, cx);\n                     })?;\n '}]
